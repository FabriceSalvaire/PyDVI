#####################################################################################################
#
# PyDVI - Python Library to Process DVI Stream
# Copyright (C) 2009 Salvaire Fabrice
#
#####################################################################################################

#####################################################################################################
#
# Audit
#
#  - 09/01/2010 fabrice
#
#####################################################################################################

#####################################################################################################

__all__ = ['TextFile']

#####################################################################################################

from abc import ABCMeta, abstractmethod

#####################################################################################################

class TextFile():

    __metaclass__ = ABCMeta

    ###############################################

    def parse(self, filename):

        with open(filename, 'r') as f:
            for line in f:
           
                comment_start_index = line.find('%')
                if comment_start_index != -1:
                    line = line[:comment_start_index]

                line = line.strip()
                    
                if line:
                    if self.parse_line(line):
                        break

    ###############################################

    @abstractmethod
    def parse_line(self, line):

        '''Parse the line
        return True to stop
        '''

        pass

#####################################################################################################
#
# End
#
#####################################################################################################

