#####################################################################################################
#
# PyDVI - Python Library to Process DVI Stream
# Copyright (C) 2009 Salvaire Fabrice
#
#####################################################################################################

#####################################################################################################
#
# Audit
#
#  - 09/01/2010 fabrice
#  - 13/05/2010 fabrice
#
#####################################################################################################

#####################################################################################################

__all__ = ['TextFile']

#####################################################################################################

class TextFile():

    """The TextFile class permits to iterate over a file and to skip commented line using '%'
    """

    ###############################################

    def __init__(self, filename):

        self.file = open(filename, 'r')

    ###############################################

    def __del__(self):

        self.file.close()

    ###############################################

    def __iter__(self):

        for line in self.file:
           
            comment_start_index = line.find('%')
            if comment_start_index != -1:
                line = line[:comment_start_index]

            line = line.strip()
                    
            if line:
                yield line

#####################################################################################################
#
# End
#
#####################################################################################################

